<!DOCTYPE html>
<html>
<head>
	
 <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <title>MJ-CW</title>

 <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script
 src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

 
  
	<link rel="stylesheet" type="text/css" href="./css/common.css">

  <link href="https://fonts.googleapis.com/css?family=Righteous&display=swap" rel="stylesheet">
   <link rel="stylesheet" href="./css/snackbar.min.css" />

</head>



<body>

<nav class="navbar navbar-expand-md bg-light navbar-light">
  <!-- Brand -->
    <a class="navbar-brand" href="#">
    <img src="./images/full_logo.svg" alt="logo" id="cw_logo">
    </a>
  <div id="tournament_name">NEUTRAL DRAGON TOURNAMENT</div>
  <!-- Toggler/collapsibe Button -->
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
    <span class="navbar-toggler-icon"></span>
  </button>

  <!-- Navbar links -->
  <div class="collapse navbar-collapse justify-content-end" id="collapsibleNavbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="index.html">HOME</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="fixture.html">FIXTURE</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="duel.html">DUEL</a>
      </li>
        <li class="nav-item">
        <a class="nav-link" href="results.html">RESULT</a>
      </li>
    </ul>
  </div>
</nav>
 <div id="melt_parent"></div>



<div id ="fixture_container">


<div id="fixtures">
  

</div>
</div>
  <script src="./js/snackbar.min.js"></script>
  <script src="./js/truffle-contract.js"></script>
   <script src="./js/web3.min.js"></script>
    <script src="./js/app.js"></script>
<!--  <table class="fixture_table" style="max-width: 400px;
    max-height: 400px;
    margin: 0 auto;
    right: 0;
    left: 0;
    margin-top: 10px;">
  <tr>
  <td><img id = "wiz_image" src="https://storage.googleapis.com/cheeze-wizards-production/0xec2203e38116f09e21bc27443e063b623b01345a/1235.svg" style="width: 200px;height: 200px"><br><div style="text-align: center;"> Wizard ID: 1234</div></td>
  <td style="width: 200px;height: 200px"><div> 
<img src="./images/water.svg" style="max-width: 40px;max-height: 40px; vertical-align: top; "><br>
<img src="./images/waterBlk.svg" style="max-width: 40px;max-height: 40px;vertical-align: top;"><br>
<img src="./images/fire.svg" style="max-width: 40px;max-height: 40px;vertical-align: top;"><br>
<img src="./images/wind.svg" style="max-width: 40px;max-height: 40px;vertical-align: top;"><br>
<img src="./images/windBlk.svg" style="max-width: 40px;max-height: 40px;vertical-align: top;">
  </div><div style="float: right;">Rounds won 3</div></td>

  
 
    <td style="width: 200px;height: 200px"><div> 
<img src="./images/fireBlk.svg" style="max-width: 40px;max-height: 40px; vertical-align: top; "><br>
<img src="./images/wind.svg" style="max-width: 40px;max-height: 40px;vertical-align: top;"><br>
<img src="./images/windBlk.svg" style="max-width: 40px;max-height: 40px;vertical-align: top;"><br>
<img src="./images/fireBlk.svg" style="max-width: 40px;max-height: 40px;vertical-align: top;"><br>
<img src="./images/fire.svg" style="max-width: 40px;max-height: 40px;vertical-align: top;">
  </div><div style="float: right;">Rounds won 2</div></td>
   <td >
    <img id = "wiz_image" src="https://storage.googleapis.com/cheeze-wizards-production/0xec2203e38116f09e21bc27443e063b623b01345a/1236.svg" 
    style="width: 200px;height: 200px" class="grayout"><br><div style="text-align: center;"> Wizard ID: 1234</div></td>
</tr>
</table>



<table class="fixture_table" style="max-width: 400px;max-height: 400px;margin: 0 auto;right: 0;left: 0;margin-top: 10px;">
  <tr>
  <td><img id = "wiz_image" src="https://storage.googleapis.com/cheeze-wizards-production/0xec2203e38116f09e21bc27443e063b623b01345a/1238.svg" style="width: 200px;height: 200px"></td>
  <td style="width: 200px;height: 200px"><div> 
<img src="./images/water.svg" style="max-width: 40px;max-height: 40px; vertical-align: top; "><br>
<img src="./images/waterBlk.svg" style="max-width: 40px;max-height: 40px;vertical-align: top;"><br>
<img src="./images/fire.svg" style="max-width: 40px;max-height: 40px;vertical-align: top;"><br>
<img src="./images/wind.svg" style="max-width: 40px;max-height: 40px;vertical-align: top;"><br>
<img src="./images/windBlk.svg" style="max-width: 40px;max-height: 40px;vertical-align: top;">
  </div><div style="float: right;">Rounds won 3</div></td> 
    <td style="width: 200px;height: 200px"><div> 
<img src="./images/fireBlk.svg" style="max-width: 40px;max-height: 40px; vertical-align: top; "><br>
<img src="./images/wind.svg" style="max-width: 40px;max-height: 40px;vertical-align: top;"><br>
<img src="./images/windBlk.svg" style="max-width: 40px;max-height: 40px;vertical-align: top;"><br>
<img src="./images/fireBlk.svg" style="max-width: 40px;max-height: 40px;vertical-align: top;"><br>
<img src="./images/fire.svg" style="max-width: 40px;max-height: 40px;vertical-align: top;">
  </div><div style="float: right;">Rounds won 2</div></td>
   <td >
    <img id = "wiz_image" src="https://storage.googleapis.com/cheeze-wizards-production/0xec2203e38116f09e21bc27443e063b623b01345a/1237.svg" 
    style="width: 200px;height: 200px" class="grayout"></td>
</tr>
</table> -->

<script type="text/javascript">



  // add method to receive wiz id and round wins

// write a logic to push spellset into respective arrays

// spellset1.push("water.svg");
// spellset1.push("waterBlk.svg");
// spellset1.push("fire.svg");
// spellset1.push("wind.svg");
// spellset1.push("windBlk.svg");

// spellset2.push("fireBlk.svg");
// spellset2.push("wind.svg");
// spellset2.push("windBlk.svg");
// spellset2.push("fireBlk.svg");
// spellset2.push("fire.svg");

//    $.ajax({
//     type: "POST",
//             url: "http://localhost:8080/neutraldragontournament/rest/getMatchArr",
//             crossDomain: true,
//             success: function (data) {
//             // Need to check the reponse type
// setFixture(data);
     
//               }

//             },
//             error: function (err) {
//               debugger
//           //    console.log(err.responseText);
//               // var obj = JSON.parse(err.responseText);
//               // console.log(obj);

//               if(err.responseText == 'notExists'){
//                 App.snackbarCall("Player is not in the tournament");
//               } else if(err.responseText == 'success'){
//                   App.snackbarCall("You have successfully placed your wizard spells");
//               } else if(err.responseText == 'failed'){
//                   App.snackbarCall("You have already placed your wizard spells");
//               }
//             });

   $.ajax({
    type: "POST",
            url: serverURl+"getMatchArr",
            crossDomain: true,
        
            success: function (data) {
            // Need to check the reponse type
            setFixture(data);
            },
            error: function (err) {
            }
            
            
            });





//<div style="float: right;">Rounds won '+wiz1roundwins+'</div>
    // <div style="float: right;">Rounds won '+wiz1roundwins+'</div>

       




       function setFixture(data){


        var wiz1="";
        var wiz2="";
        var wizid1img="";
        var wizid2img="";
        var spellset1=[];
        var spellset2=[];
        var wiz1roundwins ;
        var wiz2roundwins ;
        console.log(data);

//Messages to display

        var completedMessage ="<br><h3>Battle history<br><h3>";
        var noCompletedMessage ="<br><h3>No battle history available<br><h3>";
        var scheduledMessage ="<br><h3>Scheduled battles<br><h3>";
         var noScheduledMessage ="<br><h3>No Scheduled battles<br><h3>";


              console.log("completed",data[0].completed);
              console.log("in porgress",data[0].scheduled);

              var completedMatch=data[0].completed;
              console.log("comp_data",completedMatch.length);
if(completedMatch.length==0){

$("#fixtures").prepend(noCompletedMessage);
}
else{


              for(var i=0;i<(completedMatch.length/2);i=i+2){
  
                wiz1=completedMatch[i].wizid;
                wizid1img=completedMatch[i].wizid+".svg";

                wiz1roundwins=completedMatch[i].roundwon;
                console.log("spell1",completedMatch[i].spell1);
                spellset1.push(pushspell(completedMatch[i].spell1));
                spellset1.push(pushspell(completedMatch[i].spell2));
                spellset1.push(pushspell(completedMatch[i].spell3));
                spellset1.push(pushspell(completedMatch[i].spell4));
                spellset1.push(pushspell(completedMatch[i].spell5));



                wiz2=completedMatch[i+1].wizid;
                wizid2img=completedMatch[i+1].wizid+".svg";
                wiz2roundwins=completedMatch[i+1].roundwon;

                console.log("image ",pushspell(completedMatch[i+1].spell1));
                spellset2.push(pushspell(completedMatch[i+1].spell1));
                spellset2.push(pushspell(completedMatch[i+1].spell2));
                spellset2.push(pushspell(completedMatch[i+1].spell3));
                spellset2.push(pushspell(completedMatch[i+1].spell4));
                spellset2.push(pushspell(completedMatch[i+1].spell5));

          
                var duelFixture = '<table class="fixture_table" style="max-width:400px; max-height:400px; margin: 0 auto; right:0 ; left:0 ; margin-top:10px;"><tr><td style="width:200px;"><img id="wiz_image" src="https://storage.googleapis.com/cheeze-wizards-production/0xec2203e38116f09e21bc27443e063b623b01345a/'+wizid1img+'" style="width: 200px;height: 200px"><br> <div style="text-align: center;"> Wizard ID: '+wiz1+'</div><div style="text-align: center;">Rounds won :'+wiz1roundwins+'</div></td> <td style="width:50px; max-width: 200px;max-height: 200px"><div style=" width: 50px;max-width: 200px;max-height: 200px"> <img src="./images/'+spellset1[0]+'"style="max-width: 40px;max-height: 40px; vertical-align: top;"><br> <img src="./images/'+spellset1[1]+'"style="max-width: 40px;max-height: 40px; vertical-align: top;"><br> <img src="./images/'+spellset1[2]+'"style="max-width: 40px;max-height: 40px; vertical-align: top;"><br> <img src="./images/'+spellset1[3]+'"style="max-width: 40px;max-height: 40px; vertical-align: top;"><br> <img src="./images/'+spellset1[4]+'"style="max-width: 40px;max-height: 40px; vertical-align: top;"></div></td><td style="width:50px;max-width: 200px;max-height: 200px"><div style=" width:50px;max-width: 200px;max-height: 200px"><img src="./images/'+spellset2[0]+'"style="max-width: 40px;max-height: 40px; vertical-align: top;"><br> <img src="./images/'+spellset2[1]+'"style="max-width: 40px;max-height: 40px; vertical-align: top;"><br> <img src="./images/'+spellset2[2]+'"style="max-width: 40px;max-height: 40px; vertical-align: top;"><br> <img src="./images/'+spellset2[3]+'"style="max-width: 40px;max-height: 40px; vertical-align: top;"><br> <img src="./images/'+spellset2[4]+'"style="max-width: 40px;max-height: 40px; vertical-align: top;"></div></td><td style="width:200px;"><img id = "wiz_image" src="https://storage.googleapis.com/cheeze-wizards-production/0xec2203e38116f09e21bc27443e063b623b01345a/'+wizid2img+'"style="width: 200px;height: 200px" ><br><div style="text-align: center;"> Wizard ID: '+wiz2+'</div><div style="style="text-align: center;">Rounds won :'+wiz2roundwins+'</div></td></tr></table>';


                //To grayout add class "grayout" 
                // eg.<img id = "wiz_image" src="https://storage.googleapis.com/cheeze-wizards-production/0xec2203e38116f09e21bc27443e063b623b01345a/'+wizid2img+'"style="width: 200px;height: 200px" class="grayout">

                  var dividerLine ='<br><br><br>Level ----  ��� -- ��� -- ��� -- ��� ---- Ends<br><br><br>';

// $("#fixtures").html(duelFixture);
//$("#fixtures").append(dividerLine);
$("#fixtures").prepend(duelFixture);

       }



     function pushspell(number){

        if(number==0){
        // number 0 for fire
        return "fire.svg";
        }
        else if(number==1){
        // number 1 for wind

        return "wind.svg";
        }
        else if(number==2){

        // number 2 for water
        return "water.svg";

        }
        }
        $("#fixtures").prepend(completedMessage);  
}




  


   var scheduledMatch=data[0].scheduled;

   if(scheduledMessage.length==0){
    $("#fixtures").prepend(noScheduledMessage);
   }
   else{
         for(var i=0;i<(scheduledMatch.length/2);i=i+2){

            debugger
        var wiz1="";
        var wiz2="";
        var wizid1img="";
        var wizid2img="";

                wiz1=scheduledMatch[i].wizid;
                wizid1img=scheduledMatch[i].wizid+".svg";
                wiz2=scheduledMatch[i+1].wizid;
                wizid2img=scheduledMatch[i+1].wizid+".svg";


                   var duelFixture = '<table class="fixture_table" style="max-width:400px; max-height:400px; margin: 0 auto; right:0 ; left:0 ; margin-top:10px;"><tr><td style="width:200px;"><img id="wiz_image" src="https://storage.googleapis.com/cheeze-wizards-production/0xec2203e38116f09e21bc27443e063b623b01345a/'+wizid1img+'" style="width: 200px;height: 200px"><br> <div style="text-align: center;"> Wizard ID: '+wiz1+'</div><td style="width:50px;max-width: 200px;max-height: 200px">VS</td><td style="width:200px;"><img id = "wiz_image" src="https://storage.googleapis.com/cheeze-wizards-production/0xec2203e38116f09e21bc27443e063b623b01345a/'+wizid2img+'"style="width: 200px;height: 200px" ><br><div style="text-align: center;"> Wizard ID: '+wiz2+'</div></td></tr></table>';

$("#fixtures").prepend(duelFixture);


         }

  $("#fixtures").prepend(scheduledMessage);   
  }    
     
}


</script>


<footer></footer>




</body>
</html>